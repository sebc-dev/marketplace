# Requirements Archive: v0.1 Astro Skill MVP

**Archived:** 2026-02-03
**Status:** SHIPPED

This is the archived requirements specification for v0.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

**Defined:** 2026-02-03
**Core Value:** Claude produit du code Astro/Cloudflare correct du premier coup en appliquant automatiquement les bons patterns et en evitant les pieges connus.

## v1 Requirements

### Skill Structure (STRUCT)

- [x] **STRUCT-01**: Frontmatter SKILL.md avec description optimisee (<1024 chars) incluant mots-cles Astro/Cloudflare, file patterns (*.astro, astro.config.*), et triggers "Use when..." pour activation auto
- [x] **STRUCT-02**: Corps SKILL.md <500 lignes servant de hub de navigation avec regles critiques cross-domain, decision matrices principales, et grep hints vers references/
- [x] **STRUCT-03**: Fichiers references/ organises par domaine orthogonal a un seul niveau de profondeur depuis SKILL.md
- [x] **STRUCT-04**: Progressive disclosure fonctionnel : metadata ~100 tokens au startup, instructions <5k tokens au declenchement, references a la demande
- [x] **STRUCT-05**: Grep hints dans SKILL.md pour chaque fichier reference/ permettant a Claude de naviguer efficacement

### Content — Platform Foundation (FOUND)

- [x] **FOUND-01**: Reference file couvrant la structure projet Astro 5.17+/CF (conventions nommage, organisation fichiers, configs par defaut astro.config, wrangler.jsonc, tsconfig, env.d.ts)
- [x] **FOUND-02**: Reference file couvrant les modes de rendu (SSG/SSR/Server Islands, decision matrix par type de projet, prerendering, output modes)
- [x] **FOUND-03**: Reference file couvrant l'integration Cloudflare (bindings KV/D1/R2, platformProxy, nodejs_compat, .dev.vars vs .env, Workers limits, Pages vs Workers)

### Content — Core Domains (CORE)

- [x] **CORE-01**: Reference file couvrant composants + Islands Architecture (directives hydratation, client:visible/idle/load, Server Islands server:defer, communication inter-islands, nanostores)
- [x] **CORE-02**: Reference file couvrant routing + navigation (file-based routing, routes dynamiques, getStaticPaths, ClientRouter/View Transitions, middleware, redirects/rewrites)
- [x] **CORE-03**: Reference file couvrant gestion des donnees (Content Layer API, loaders glob/file, collections, Astro Actions vs API routes, schemas Zod)
- [x] **CORE-04**: Reference file couvrant styling + performance (scoped styles, CSS modules, Tailwind, optimisation images, bundle analysis, Core Web Vitals, lazy loading)

### Content — Secondary Domains (SECN)

- [x] **SECN-01**: Reference file couvrant SEO + metadonnees + i18n (meta tags, sitemap, OpenGraph, structured data, routing multilingue, hreflang)
- [x] **SECN-02**: Reference file couvrant TypeScript + testing (types Astro, Container API, Vitest, testing patterns, type safety Cloudflare bindings)
- [x] **SECN-03**: Reference file couvrant build/deploy + DevX (scripts package.json, wrangler dev/deploy, CI/CD, tooling recommande, debugging)
- [x] **SECN-04**: Reference file couvrant securite + patterns avances + Markdown/MDX/Markdoc (CSP, auth patterns, middleware security, MDX setup, custom components, remark/rehype)

### Content — Cross-cutting (CROSS)

- [x] **CROSS-01**: Anti-patterns table dans SKILL.md couvrant les breaking changes Astro 5.x les plus critiques (content.config.ts path, slug→id, render() API, type:'content'→loader)
- [x] **CROSS-02**: Decision matrices dans SKILL.md pour les choix architecturaux majeurs (output mode, hydration directive, Actions vs API, Server Islands vs alternatives)
- [x] **CROSS-03**: Troubleshooting tables dans les references avec symptome → cause → fix pour erreurs frequentes Astro/Cloudflare
- [x] **CROSS-04**: Code patterns/templates pour configs par defaut (astro.config.mjs, wrangler.jsonc, tsconfig.json, env.d.ts, content.config.ts, package.json scripts)

### MCP Integration (INTEG)

- [x] **INTEG-01**: Instructions dans SKILL.md pour utiliser `mcp__astro_doc__search_astro_docs` comme complement pour les details d'API et config officielle
- [x] **INTEG-02**: Boundary claire documentee : skill = "quoi faire et pourquoi" (decisions, anti-patterns), MCP = "toutes les options disponibles" (API reference, details config)

### Slash Commands (CMD)

- [x] **CMD-01**: Commande scaffolding pour creer un nouveau projet Astro/Cloudflare avec structure et configs recommandees
- [x] **CMD-02**: Commande audit pour verifier la configuration d'un projet Astro/CF existant contre les best practices
- [x] **CMD-03**: Commande debug/troubleshoot pour diagnostiquer les erreurs courantes Astro/Cloudflare

### Testing & Validation (TEST)

- [x] **TEST-01**: Tests d'activation : 5+ prompts naturels qui doivent declencher le skill + 3 prompts qui ne doivent PAS le declencher
- [x] **TEST-02**: Validation de navigation : Claude navigue correctement de SKILL.md vers les references/ pertinents via grep hints
- [x] **TEST-03**: Validation MCP : Claude utilise search_astro_docs pour les details d'API quand le skill ne couvre pas
- [x] **TEST-04**: Test de session longue : verifier la resilience apres compaction (~55K tokens) — validated through real-world usage

## v2 Requirements (Deferred)

### Enhanced Commands

- **CMD-04**: Commande migration Astro 4.x → 5.x avec analyse automatique du code existant
- **CMD-05**: Commande performance audit avec analyse des directives d'hydratation et bundle size

### Extended Content

- **SECN-05**: Reference file dedie aux integrations tierces (CMS headless, analytics, auth providers)
- **CROSS-05**: Exemples de projets complets par type (site vitrine, blog, e-commerce leger, dashboard)

### Resilience

- **TEST-05**: Backup CLAUDE.md avec les regles les plus critiques en cas de perte du skill apres compaction
- **TEST-06**: Tests cross-model (Haiku, Sonnet, Opus) avec metriques de qualite

## Out of Scope

| Feature | Reason |
|---------|--------|
| Support autres providers (Vercel, Netlify, Deno) | Focus exclusif Cloudflare, correspond a l'usage freelance reel |
| Tutoriels debutant Astro | Le skill suppose une connaissance de base, le MCP couvre l'apprentissage |
| Duplication de la doc officielle Astro | Role du MCP search_astro_docs, pas du skill |
| Support multi-framework islands (Vue, Svelte, Solid) | React suffisant pour l'usage freelance, reduit la maintenance |
| Scripts executables dans le skill | Overhead de maintenance disproportionne pour un outil personnel |
| Versions specifiques de packages | Information time-sensitive qui devient obsolete, deleguer au MCP |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| STRUCT-01 | Phase 1 | Complete |
| STRUCT-02 | Phase 5 | Complete |
| STRUCT-03 | Phase 1 | Complete |
| STRUCT-04 | Phase 1 | Complete |
| STRUCT-05 | Phase 5 | Complete |
| FOUND-01 | Phase 2 | Complete |
| FOUND-02 | Phase 2 | Complete |
| FOUND-03 | Phase 2 | Complete |
| CORE-01 | Phase 3 | Complete |
| CORE-02 | Phase 3 | Complete |
| CORE-03 | Phase 3 | Complete |
| CORE-04 | Phase 3 | Complete |
| SECN-01 | Phase 4 | Complete |
| SECN-02 | Phase 4 | Complete |
| SECN-03 | Phase 4 | Complete |
| SECN-04 | Phase 4 | Complete |
| CROSS-01 | Phase 5 | Complete |
| CROSS-02 | Phase 5 | Complete |
| CROSS-03 | Phase 3 | Complete |
| CROSS-04 | Phase 2 | Complete |
| INTEG-01 | Phase 5 | Complete |
| INTEG-02 | Phase 5 | Complete |
| CMD-01 | Phase 6 | Complete |
| CMD-02 | Phase 6 | Complete |
| CMD-03 | Phase 6 | Complete |
| TEST-01 | Phase 7 | Complete |
| TEST-02 | Phase 7 | Complete |
| TEST-03 | Phase 7 | Complete |
| TEST-04 | Phase 7 | Complete |

---

## Milestone Summary

**Shipped:** 29 of 29 v1 requirements
**Adjusted:** TEST-04 (session resilience) validated through real-world usage instead of formal protocol
**Dropped:** None

---
*Archived: 2026-02-03 as part of v0.1 milestone completion*
