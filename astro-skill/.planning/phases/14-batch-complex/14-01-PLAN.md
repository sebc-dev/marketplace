---
phase: 14-batch-complex
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/skills/astro-cloudflare/references/build-deploy.md
autonomous: true

must_haves:
  truths:
    - "build-deploy.md has 13 XML containers wrapping every ## section"
    - "Universal tags quick_reference, anti_patterns, troubleshooting are named identically to all prior files"
    - "All 11 grep patterns for build-deploy.md in SKILL.md return exactly 1 match"
    - "git diff shows only added XML tag lines -- zero content modifications"
    - "Token overhead is below 6% (review zone accepted per CONTEXT.md)"
    - "3 MCP callouts remain inside their parent tags (github_actions_ci_cd, cli_flags_reference, debugging_workflow)"
  artifacts:
    - path: ".claude/skills/astro-cloudflare/references/build-deploy.md"
      provides: "XML-tagged build/deploy reference"
      contains: "<quick_reference>"
  key_links:
    - from: ".claude/skills/astro-cloudflare/SKILL.md"
      to: "references/build-deploy.md"
      via: "grep patterns"
      pattern: "grep -n .* references/build-deploy.md"
---

<objective>
Apply XML semantic containers to build-deploy.md -- 13 sections, 3 MCP callouts, longest tag names in the batch.

Purpose: First complex file validates the full-length tag naming convention from CONTEXT.md.
Output: build-deploy.md with 13 XML tags wrapping all ## sections, committed after validation.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/XML-CONVENTIONS.md
@.planning/phases/14-batch-complex/14-RESEARCH.md
@.claude/skills/astro-cloudflare/references/cloudflare-platform.md (pilot reference)
@.claude/skills/astro-cloudflare/references/build-deploy.md
@.claude/skills/astro-cloudflare/SKILL.md (grep patterns)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Record baseline and apply 13 XML tags to build-deploy.md</name>
  <files>.claude/skills/astro-cloudflare/references/build-deploy.md</files>
  <action>
1. Record baseline: `wc -c .claude/skills/astro-cloudflare/references/build-deploy.md`

2. Add XML container tags around each ## section. Tag map (13 tags):

| Line | Header | Tag |
|------|--------|-----|
| 5 | `## Quick Reference` | `<quick_reference>` |
| 20 | `## Output Mode Decision Matrix` | `<output_mode_decision_matrix>` |
| 33 | `## Deployment Target Decision Matrix` | `<deployment_target_decision_matrix>` |
| 44 | `## Dev/Preview Workflow Matrix` | `<dev_preview_workflow_matrix>` |
| 55 | `## Package.json Scripts` | `<package_json_scripts>` |
| 81 | `## GitHub Actions CI/CD` | `<github_actions_ci_cd>` |
| 128 | `## .assetsignore for Workers Static Assets` | `<assetsignore_for_workers_static_assets>` |
| 138 | `## Adapter Options` | `<adapter_options>` |
| 151 | `## CLI Flags Reference` | `<cli_flags_reference>` |
| 169 | `## Debugging Workflow` | `<debugging_workflow>` |
| 208 | `## VS Code Configuration` | `<vs_code_configuration>` |
| 231 | `## Anti-patterns` | `<anti_patterns>` |
| 247 | `## Troubleshooting` | `<troubleshooting>` |

**MCP callouts (3 total -- all stay inside their parent section tags):**
- Line ~126: MCP callout inside `<github_actions_ci_cd>` -- do NOT split it out
- Line ~167: MCP callout inside `<cli_flags_reference>` -- do NOT split it out
- Line ~206: MCP callout inside `<debugging_workflow>` -- do NOT split it out

Rules (from XML-CONVENTIONS.md):
- Opening tag goes immediately BEFORE the `##` header (no blank line between tag and header)
- Closing tag goes immediately AFTER the last content line of the section (no blank line before closing tag)
- Blank lines BETWEEN sections are preserved (between closing tag and next opening tag)
- File title `# Build & Deploy` and subtitle text get NO tag wrapper
- DO NOT modify any content -- only add XML tag lines

**OVERHEAD ALERT:** Estimated ~5.8% due to long tag names (output_mode_decision_matrix, deployment_target_decision_matrix, assetsignore_for_workers_static_assets). This is in the 5.0-6.0% review zone per XML-CONVENTIONS.md. If actual overhead exceeds 6.0%, shorten the longest tag names per Claude's Discretion on overhead.

3. Validate all 4 checks:

Check 1 -- Grep patterns (11 patterns from SKILL.md, all must return exactly 1 match):
```bash
cd .claude/skills/astro-cloudflare
grep -n "## Output Mode Decision Matrix" references/build-deploy.md | wc -l          # expect 1
grep -n "## Deployment Target Decision Matrix" references/build-deploy.md | wc -l     # expect 1
grep -n "## Dev/Preview Workflow Matrix" references/build-deploy.md | wc -l           # expect 1
grep -n "## Package.json Scripts" references/build-deploy.md | wc -l                  # expect 1
grep -n "## GitHub Actions CI/CD" references/build-deploy.md | wc -l                  # expect 1
grep -n "## .assetsignore" references/build-deploy.md | wc -l                         # expect 1
grep -n "## Adapter Options" references/build-deploy.md | wc -l                       # expect 1
grep -n "## Debugging Workflow" references/build-deploy.md | wc -l                    # expect 1
grep -n "## VS Code Configuration" references/build-deploy.md | wc -l                # expect 1
grep -n "## Anti-patterns" references/build-deploy.md | wc -l                         # expect 1
grep -n "## Troubleshooting" references/build-deploy.md | wc -l                       # expect 1
```

Check 2 -- Diff integrity (only XML tag lines added):
```bash
git diff .claude/skills/astro-cloudflare/references/build-deploy.md | grep '^+' | grep -v '^+++' | grep -v '^+$' | grep -v '^+</?[a-z_]*>$'
# Must return empty (no non-XML additions)
```

Check 3 -- Overhead:
```bash
wc -c .claude/skills/astro-cloudflare/references/build-deploy.md
# Calculate: (after - before) / before * 100
# Expected ~5.8% (review zone, acceptable if < 6.0%)
# If > 6.0%, shorten longest tag names
```

Check 4 -- Tag balance:
```bash
grep -c '^<[a-z_]*>$' .claude/skills/astro-cloudflare/references/build-deploy.md   # expect 13
grep -c '^</[a-z_]*>$' .claude/skills/astro-cloudflare/references/build-deploy.md  # expect 13
```
NOTE: If false positives from HTML tags in code blocks affect the count, verify manually with `grep -n '^<[a-z_]*>$'` and confirm each match is an XML container tag.

4. If all checks pass, commit:
```bash
git add .claude/skills/astro-cloudflare/references/build-deploy.md
git commit -m "feat(14-01): apply XML semantic containers to build-deploy.md"
```
  </action>
  <verify>All 4 validation checks pass (11 grep patterns each return 1, diff integrity clean, overhead < 6.0%, tag balance 13/13). Commit created.</verify>
  <done>build-deploy.md has 13 XML containers, zero content changes, overhead in review zone (< 6.0%), all 11 grep patterns return 1 match, 3 MCP callouts inside parent tags, committed.</done>
</task>

</tasks>

<verification>
1. `grep -c '^<[a-z_]*>$' .claude/skills/astro-cloudflare/references/build-deploy.md` returns 13
2. `grep -c '^</[a-z_]*>$' .claude/skills/astro-cloudflare/references/build-deploy.md` returns 13
3. All 11 SKILL.md grep patterns for build-deploy.md return exactly 1 match each
4. `git diff HEAD~1 -- .claude/skills/astro-cloudflare/references/build-deploy.md | grep '^+' | grep -v '^+++' | grep -v '^+$' | grep -v '^+</?[a-z_]*>$'` returns empty
5. Overhead < 6.0% (review zone accepted per CONTEXT.md long tag names)
</verification>

<success_criteria>
build-deploy.md contains 13 XML semantic containers wrapping every ## section, with zero content modifications, all SKILL.md grep patterns returning exactly 1 match, 3 MCP callouts preserved inside parent tags, and overhead in the acceptable review zone.
</success_criteria>

<output>
After completion, create `.planning/phases/14-batch-complex/14-01-SUMMARY.md`
</output>
