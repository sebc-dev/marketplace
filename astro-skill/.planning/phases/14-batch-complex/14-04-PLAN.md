---
phase: 14-batch-complex
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/skills/astro-cloudflare/references/styling-performance.md
autonomous: true

must_haves:
  truths:
    - "styling-performance.md has 12 XML containers wrapping every ## section"
    - "Universal tags quick_reference, anti_patterns, troubleshooting are named identically to all prior files"
    - "All 10 grep patterns for styling-performance.md in SKILL.md return exactly 1 match"
    - "git diff shows only added XML tag lines -- zero content modifications"
    - "Token overhead is below 5%"
  artifacts:
    - path: ".claude/skills/astro-cloudflare/references/styling-performance.md"
      provides: "XML-tagged styling/performance reference"
      contains: "<quick_reference>"
  key_links:
    - from: ".claude/skills/astro-cloudflare/SKILL.md"
      to: "references/styling-performance.md"
      via: "grep patterns"
      pattern: "grep -n .* references/styling-performance.md"
---

<objective>
Apply XML semantic containers to styling-performance.md -- 12 sections, underscore-prefix header edge case (_headers File Pattern).

Purpose: Fourth complex file validates underscore-prefix removal rule from CONTEXT.md. Lowest estimated overhead in the batch (~4.9%).
Output: styling-performance.md with 12 XML tags wrapping all ## sections, committed after validation.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/XML-CONVENTIONS.md
@.planning/phases/14-batch-complex/14-RESEARCH.md
@.claude/skills/astro-cloudflare/references/cloudflare-platform.md (pilot reference)
@.claude/skills/astro-cloudflare/references/styling-performance.md
@.claude/skills/astro-cloudflare/SKILL.md (grep patterns)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Record baseline and apply 12 XML tags to styling-performance.md</name>
  <files>.claude/skills/astro-cloudflare/references/styling-performance.md</files>
  <action>
1. Record baseline: `wc -c .claude/skills/astro-cloudflare/references/styling-performance.md`

2. Add XML container tags around each ## section. Tag map (12 tags):

| Line | Header | Tag |
|------|--------|-----|
| 5 | `## Quick Reference` | `<quick_reference>` |
| 22 | `## Image Service Selection` | `<image_service_selection>` |
| 32 | `## Image Component Patterns` | `<image_component_patterns>` |
| 79 | `## Scoped Style Propagation` | `<scoped_style_propagation>` |
| 115 | `## CSS Approach Selection` | `<css_approach_selection>` |
| 127 | `## Tailwind v4 Setup` | `<tailwind_v4_setup>` |
| 171 | `## Caching Strategy` | `<caching_strategy>` |
| 185 | `## _headers File Pattern` | `<headers_file_pattern>` |
| 213 | `## Prefetch Strategy` | `<prefetch_strategy>` |
| 243 | `## SSR Cache Headers` | `<ssr_cache_headers>` |
| 266 | `## Anti-patterns` | `<anti_patterns>` |
| 283 | `## Troubleshooting` | `<troubleshooting>` |

**Naming conversion applied per CONTEXT.md:**
- `_headers File Pattern` -> `headers_file_pattern` (drop leading underscore, brute word-for-word)

Rules (from XML-CONVENTIONS.md):
- Opening tag goes immediately BEFORE the `##` header (no blank line between tag and header)
- Closing tag goes immediately AFTER the last content line of the section (no blank line before closing tag)
- Blank lines BETWEEN sections are preserved (between closing tag and next opening tag)
- File title and subtitle text get NO tag wrapper
- DO NOT modify any content -- only add XML tag lines

**FALSE POSITIVE NOTE:** styling-performance.md may contain HTML tags (`<head>`, `<style>`, `<nav>`) in code blocks. These are typically indented inside code fences and should NOT match the `'^<[a-z_]*>$'` pattern (which requires start-of-line). Verify with `grep -n` if tag count seems off.

3. Validate all 4 checks:

Check 1 -- Grep patterns (10 patterns from SKILL.md, all must return exactly 1 match):
```bash
cd .claude/skills/astro-cloudflare
grep -n "## Image Service Selection" references/styling-performance.md | wc -l         # expect 1
grep -n "## Image Component Patterns" references/styling-performance.md | wc -l        # expect 1
grep -n "## Scoped Style Propagation" references/styling-performance.md | wc -l        # expect 1
grep -n "## CSS Approach Selection" references/styling-performance.md | wc -l          # expect 1
grep -n "## Tailwind v4 Setup" references/styling-performance.md | wc -l               # expect 1
grep -n "## Caching Strategy" references/styling-performance.md | wc -l                # expect 1
grep -n "## _headers File Pattern" references/styling-performance.md | wc -l           # expect 1
grep -n "## Prefetch Strategy" references/styling-performance.md | wc -l               # expect 1
grep -n "## Anti-patterns" references/styling-performance.md | wc -l                   # expect 1
grep -n "## Troubleshooting" references/styling-performance.md | wc -l                 # expect 1
```

Check 2 -- Diff integrity (only XML tag lines added):
```bash
git diff .claude/skills/astro-cloudflare/references/styling-performance.md | grep '^+' | grep -v '^+++' | grep -v '^+$' | grep -v '^+</?[a-z_]*>$'
# Must return empty (no non-XML additions)
```

Check 3 -- Overhead:
```bash
wc -c .claude/skills/astro-cloudflare/references/styling-performance.md
# Calculate: (after - before) / before * 100
# Expected ~4.9% (under 5% threshold -- PASS)
```

Check 4 -- Tag balance:
```bash
grep -c '^<[a-z_]*>$' .claude/skills/astro-cloudflare/references/styling-performance.md   # expect 12
grep -c '^</[a-z_]*>$' .claude/skills/astro-cloudflare/references/styling-performance.md  # expect 12
```

4. If all checks pass, commit:
```bash
git add .claude/skills/astro-cloudflare/references/styling-performance.md
git commit -m "feat(14-04): apply XML semantic containers to styling-performance.md"
```
  </action>
  <verify>All 4 validation checks pass (10 grep patterns each return 1, diff integrity clean, overhead < 5%, tag balance 12/12). Commit created.</verify>
  <done>styling-performance.md has 12 XML containers, zero content changes, overhead < 5%, all 10 grep patterns return 1 match, committed.</done>
</task>

</tasks>

<verification>
1. `grep -c '^<[a-z_]*>$' .claude/skills/astro-cloudflare/references/styling-performance.md` returns 12
2. `grep -c '^</[a-z_]*>$' .claude/skills/astro-cloudflare/references/styling-performance.md` returns 12
3. All 10 SKILL.md grep patterns for styling-performance.md return exactly 1 match each
4. `git diff HEAD~1 -- .claude/skills/astro-cloudflare/references/styling-performance.md | grep '^+' | grep -v '^+++' | grep -v '^+$' | grep -v '^+</?[a-z_]*>$'` returns empty
5. Overhead < 5%
</verification>

<success_criteria>
styling-performance.md contains 12 XML semantic containers wrapping every ## section, with zero content modifications, all SKILL.md grep patterns returning exactly 1 match, and overhead below 5%.
</success_criteria>

<output>
After completion, create `.planning/phases/14-batch-complex/14-04-SUMMARY.md`
</output>
