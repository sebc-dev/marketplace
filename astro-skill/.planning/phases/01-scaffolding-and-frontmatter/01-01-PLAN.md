---
phase: 01-scaffolding-and-frontmatter
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/skills/astro-cloudflare/SKILL.md
  - .claude/skills/astro-cloudflare/references/.gitkeep
autonomous: true

must_haves:
  truths:
    - "SKILL.md exists at .claude/skills/astro-cloudflare/SKILL.md with valid YAML frontmatter"
    - "name field equals 'astro-cloudflare' (matches directory, lowercase+hyphens, <=64 chars)"
    - "description field is <1024 chars, contains file patterns (*.astro, astro.config.*, wrangler.*), Astro/Cloudflare keywords, and 'use when' triggers"
    - "description targets BOTH Astro AND Cloudflare — not Astro-only projects"
    - "SKILL.md has no body content after frontmatter (body deferred to Phase 5)"
  artifacts:
    - path: ".claude/skills/astro-cloudflare/SKILL.md"
      provides: "Skill entry point with auto-activation frontmatter"
      contains: "name: astro-cloudflare"
    - path: ".claude/skills/astro-cloudflare/references/"
      provides: "Directory for reference files (populated in Plan 02)"
  key_links:
    - from: "SKILL.md name field"
      to: "parent directory name"
      via: "Agent Skills spec requires name == directory name"
      pattern: "name: astro-cloudflare"
---

<objective>
Create the skill directory structure and write the SKILL.md frontmatter optimized for auto-activation on Astro + Cloudflare projects.

Purpose: The frontmatter description is the SOLE signal for auto-activation. A poorly written description means the skill is invisible. This is the highest-leverage element of the entire skill — getting it right enables everything else.
Output: `.claude/skills/astro-cloudflare/SKILL.md` with keyword-packed YAML frontmatter, empty `references/` directory ready for stubs.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-scaffolding-and-frontmatter/01-CONTEXT.md
@.planning/phases/01-scaffolding-and-frontmatter/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create skill directory and SKILL.md with optimized frontmatter</name>
  <files>
    .claude/skills/astro-cloudflare/SKILL.md
    .claude/skills/astro-cloudflare/references/.gitkeep
  </files>
  <action>
Create the directory structure:
```
.claude/skills/astro-cloudflare/
├── SKILL.md
└── references/
    └── .gitkeep
```

Write SKILL.md with YAML frontmatter ONLY (no body content — body is Phase 5).

**Frontmatter requirements (Agent Skills spec from agentskills.io):**
- `name`: Must be `astro-cloudflare` (matches parent directory name exactly). Lowercase letters, numbers, hyphens only. Max 64 chars.
- `description`: Max 1024 characters. Must be non-empty. Cannot contain XML tags.

**Description optimization (from RESEARCH.md verified best practices):**
1. Write in third person ("Provides..." not "I help...")
2. Include WHAT the skill does AND WHEN to use it
3. Pack file pattern triggers: `*.astro`, `astro.config.mjs`, `astro.config.ts`, `wrangler.jsonc`, `wrangler.toml`
4. Pack keyword triggers: Astro 5.x, Cloudflare Workers, Cloudflare Pages, SSG, SSR, Server Islands, hydration directives, Content Layer, Content Collections, Astro Actions, middleware, ClientRouter, Cloudflare bindings (KV, D1, R2)
5. Include "Use when" triggers so the skill activates on conversational prompts even without an existing project
6. Use the full 1024 character budget — more keywords = better activation
7. Mention MCP complement: `mcp__astro_doc__search_astro_docs`

**Draft from RESEARCH.md (~725 chars — expand to use more of the 1024 budget):**
```yaml
---
name: astro-cloudflare
description: |
  Astro 5.x development on Cloudflare Workers/Pages. Provides rendering mode
  decisions (SSG/SSR/Server Islands), hydration strategies (client:load,
  client:visible, client:idle, server:defer), Content Layer patterns with
  loaders, Cloudflare bindings (KV, D1, R2), and anti-pattern prevention for
  Astro 5.x breaking changes. Use when working with .astro files,
  astro.config.mjs, astro.config.ts, wrangler.jsonc, wrangler.toml, or
  Cloudflare Workers/Pages projects. Use when questions involve Astro
  components, islands architecture, Content Collections, Astro Actions, Astro
  middleware, ClientRouter, Server Islands, SSR on Cloudflare, image
  optimization without Sharp, or Cloudflare bindings and environment variables.
  Complements mcp__astro_doc__search_astro_docs for official API reference.
---
```

**Enhance the draft to use more of the 1024 chars.** Add keywords from the research that improve activation:
- Routing, dynamic routes, getStaticPaths
- Scoped styles, Tailwind CSS
- Cloudflare platformProxy, nodejs_compat, .dev.vars
- TypeScript, env.d.ts
- Build, deploy, wrangler dev
- MDX, Markdoc
- Content config (content.config.ts)
- CSP, security
- SEO, sitemap, OpenGraph

**Critical constraint:** Count the final description characters. It MUST be under 1024. Use `wc -c` or equivalent to verify after writing.

**What NOT to do:**
- Do NOT add any body content after the closing `---`. Phase 5 writes the body.
- Do NOT use XML tags in the description (spec forbids it).
- Do NOT use uppercase or special characters in `name` field.

Create `references/.gitkeep` as an empty file to ensure the directory is tracked by git.
  </action>
  <verify>
1. `test -f .claude/skills/astro-cloudflare/SKILL.md` exits 0
2. `test -d .claude/skills/astro-cloudflare/references/` exits 0
3. YAML frontmatter parses correctly: first line is `---`, has `name:` and `description:` fields, closes with `---`
4. `name` field value is exactly `astro-cloudflare`
5. Description character count < 1024: extract description text between `description: |` and closing `---`, count chars
6. Description contains key activation terms: "astro", "cloudflare", ".astro", "wrangler", "Use when"
7. No content exists after the closing `---` frontmatter delimiter
  </verify>
  <done>
SKILL.md exists with valid YAML frontmatter where name is "astro-cloudflare" and description is under 1024 chars containing file patterns, Astro/Cloudflare keywords, and "use when" triggers. The references/ directory exists and is empty. No body content is present after frontmatter.
  </done>
</task>

</tasks>

<verification>
- SKILL.md frontmatter is valid YAML (parseable, no syntax errors)
- name field matches directory name exactly: `astro-cloudflare`
- description field character count is strictly < 1024
- description contains ALL of: file patterns (*.astro, astro.config.*, wrangler.*), framework keywords (Astro 5, Cloudflare), "Use when" triggers
- references/ directory exists (empty, with .gitkeep)
- No body content after frontmatter closing `---`
- Progressive disclosure: frontmatter alone is ~100 tokens (lightweight for startup scanning)
</verification>

<success_criteria>
1. `.claude/skills/astro-cloudflare/SKILL.md` exists with valid YAML frontmatter
2. `name: astro-cloudflare` (spec-compliant)
3. `description` < 1024 chars, keyword-packed for auto-activation on Astro+Cloudflare prompts
4. `references/` directory exists and is ready for stub files
5. No body content in SKILL.md (deferred to Phase 5)
</success_criteria>

<output>
After completion, create `.planning/phases/01-scaffolding-and-frontmatter/01-01-SUMMARY.md`
</output>
