---
phase: 12-pilot
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/XML-CONVENTIONS.md
autonomous: true

must_haves:
  truths:
    - "XML-CONVENTIONS.md defines the 3 universal tags (quick_reference, anti_patterns, troubleshooting) with exact naming"
    - "Derivation rules for domain-specific tags are documented with concrete examples"
    - "A before/after visual example shows the compact format (tag line, header, content, closing tag)"
    - "A per-file validation checklist is included for batch phases"
  artifacts:
    - path: ".planning/XML-CONVENTIONS.md"
      provides: "Reusable XML container conventions for all 11 reference files"
      contains: "quick_reference"
  key_links:
    - from: ".planning/XML-CONVENTIONS.md"
      to: "references/cloudflare-platform.md"
      via: "conventions applied to pilot"
      pattern: "cloudflare-platform"
---

<objective>
Create the XML-CONVENTIONS.md document that defines all tagging rules before applying them to the pilot file.

Purpose: Establish a single source of truth for XML container conventions so phases 13-14 can apply the pattern without re-discussion.
Output: `.planning/XML-CONVENTIONS.md` with naming rules, format examples, universal/domain-specific tag guidance, and validation checklist.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-pilot/12-CONTEXT.md
@.planning/phases/12-pilot/12-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create XML-CONVENTIONS.md</name>
  <files>.planning/XML-CONVENTIONS.md</files>
  <action>
Create `.planning/XML-CONVENTIONS.md` with the following structure and content:

**1. Tag Naming Rules**
- All tag names use strict snake_case (lowercase, underscores)
- Tag names describe content semantically (not format)
- Tag-header duplication IS allowed when descriptive (e.g., `<platform_proxy>` for `## Platform Proxy`)
- No XML attributes -- plain tags only
- No XML comments

**2. Universal Tags** (present when content exists, never forced on empty content)
List these 3 tags with exact names:
- `<quick_reference>` -- cheatsheet/matrix sections
- `<anti_patterns>` -- common errors with corrections
- `<troubleshooting>` -- diagnostic tables

**3. Domain-Specific Tag Derivation Rules**
- Derive tag name from the `## Header` content by converting to snake_case
- Example: `## Bindings Access` → `<bindings_access>`
- Example: `## Node.js Compatibility` → `<nodejs_compatibility>`
- Example: `## Workers Limits` → `<workers_limits>`
- The test for whether a `###` subsection gets its own tag: "Is this independently queryable?" If yes, tag it. If no, leave it inside the parent tag.

**4. Tag Placement Format** (compact, no blank lines between tag and content)
Show a before/after example:

BEFORE:
```
## Quick Reference

1. Rule one
2. Rule two
```

AFTER:
```
<quick_reference>
## Quick Reference

1. Rule one
2. Rule two
</quick_reference>
```

Key rules:
- Tag opens BEFORE the `##` header
- Tag closes AFTER the last content line of the section
- NO blank line between opening tag and header
- NO blank line between last content line and closing tag
- Blank lines BETWEEN sections (between closing tag and next opening tag) are preserved

**5. Nesting Rules**
- 1 level of nesting maximum (parent can contain children, but no deeper)
- Nesting is optional -- use only when subsections are independently queryable
- Example: `<config_templates>` could contain `<wrangler_config>` and `<dev_vars>`, but this is not required

**6. Content Integrity Rules**
- ZERO modifications to existing content
- Only XML tag lines are added (opening and closing)
- All Markdown headers preserved inside their tags
- All code blocks preserved byte-identical
- All tables preserved byte-identical
- MCP callouts (blockquotes starting with `>`) stay inside their parent container

**7. Per-File Validation Checklist**
Include this checklist template:
- [ ] Every `##` section wrapped in a descriptive XML tag
- [ ] Universal tags named exactly: `quick_reference`, `anti_patterns`, `troubleshooting`
- [ ] All grep patterns from SKILL.md return exactly 1 match
- [ ] `git diff` shows only added XML tag lines (no content changes)
- [ ] Token overhead < 5% (measure with `wc -c` before/after)
- [ ] Opening tag count equals closing tag count
- [ ] No nesting beyond 1 level
- [ ] File title (`# Title`) has NO tag wrapper

**8. What NOT to Tag**
- The file title (`# Cloudflare Platform`) -- no tag
- Individual code blocks within a section -- the section tag covers them
- Individual table rows -- the section tag covers the table
- MCP callout blockquotes -- they stay inside the parent section tag

Keep the document concise and reference-oriented (not tutorial-style). Target ~100-150 lines.
  </action>
  <verify>
1. File exists: `ls .planning/XML-CONVENTIONS.md`
2. Contains all 3 universal tag names: `grep -c 'quick_reference\|anti_patterns\|troubleshooting' .planning/XML-CONVENTIONS.md` returns >= 3
3. Contains before/after example: `grep -c 'BEFORE\|AFTER' .planning/XML-CONVENTIONS.md` returns >= 2
4. Contains validation checklist: `grep -c '\[ \]' .planning/XML-CONVENTIONS.md` returns >= 6
  </verify>
  <done>XML-CONVENTIONS.md exists in .planning/ with naming rules, universal tags, domain-specific derivation rules, before/after example, nesting rules, content integrity rules, and per-file validation checklist.</done>
</task>

</tasks>

<verification>
- `.planning/XML-CONVENTIONS.md` exists and is well-structured
- All 3 universal tag names appear
- Before/after visual example present
- Validation checklist is copy-pasteable for each file
</verification>

<success_criteria>
XML-CONVENTIONS.md is complete, concise, and serves as the single reference for phases 12-02, 13, and 14.
</success_criteria>

<output>
After completion, create `.planning/phases/12-pilot/12-01-SUMMARY.md`
</output>
